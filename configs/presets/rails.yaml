---
preset:
  name: rails
  description: "Ruby on Rails Development - Full-stack Ruby web framework with PostgreSQL and Redis"

apt_packages:
  - ruby-dev
  - build-essential
  - libpq-dev
  - nodejs
  - yarn

gem_packages:
  - rails
  - pg
  - redis
  - sidekiq
  - rspec-rails
  - factory_bot_rails
  - rubocop
  - brakeman
  - bundler-audit

npm_packages:
  - prettier  # For frontend assets
  - webpack

ports:
  rails: "${port.0}"  # Rails server default
  rails-alt: "${port.1}"  # Alternative Rails port
  sidekiq: "${port.2}"  # Sidekiq web UI

services:
  postgresql:
    enabled: false  # Enable manually if needed
  redis:
    enabled: false  # Enable manually if needed

environment:
  RAILS_ENV: development
  BUNDLE_PATH: vendor/bundle